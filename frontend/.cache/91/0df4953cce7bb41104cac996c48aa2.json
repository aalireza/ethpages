{"id":"node_modules/uport-transports/lib/transport/ui/index.js","dependencies":[{"name":"/Users/sashavol/Misc/ethdenver-keybook/frontend/package.json","includedInParent":true,"mtime":1550371955498},{"name":"/Users/sashavol/Misc/ethdenver-keybook/frontend/node_modules/uport-transports/package.json","includedInParent":true,"mtime":1550368277431},{"name":"/Users/sashavol/Misc/ethdenver-keybook/frontend/node_modules/uport-transports/.babelrc","includedInParent":true,"mtime":499162500000},{"name":"qr-image","loc":{"line":8,"column":23},"parent":"/Users/sashavol/Misc/ethdenver-keybook/frontend/node_modules/uport-transports/lib/transport/ui/index.js","resolved":"/Users/sashavol/Misc/ethdenver-keybook/frontend/node_modules/qr-image/lib/qr.js"},{"name":"./templates","loc":{"line":12,"column":25},"parent":"/Users/sashavol/Misc/ethdenver-keybook/frontend/node_modules/uport-transports/lib/transport/ui/index.js","resolved":"/Users/sashavol/Misc/ethdenver-keybook/frontend/node_modules/uport-transports/lib/transport/ui/templates.js"}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.failure = exports.askProvider = exports.spinner = exports.success = exports.notifyPushSent = exports.open = exports.close = exports.getImageDataURI = undefined;\n\nvar _qrImage = require('qr-image');\n\nvar _qrImage2 = _interopRequireDefault(_qrImage);\n\nvar _templates = require('./templates');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @module uport-transports/transport/ui\n * @description\n * A set of ui utility functions and default displays for bridging between\n * a web browser and a uport user's mobile app\n */\n\n/**\n *  Given a string of data it returns a image URI which is a QR code. An image\n *  URI can be displayed in a img html tag by setting the src attrbiute to the\n *  the image URI.\n *\n *  @param    {String}     data      data string, typically a uPort URI\n *  @return   {String}               image URI\n */\nvar getImageDataURI = exports.getImageDataURI = function getImageDataURI(data) {\n  var pngBuffer = _qrImage2.default.imageSync(data, { type: 'png' });\n  return 'data:image/png;charset=utf-8;base64, ' + pngBuffer.toString('base64');\n};\n\n/**\n *  Closes the default QR pop over\n */\nvar close = exports.close = function close() {\n  var uportWrapper = document.getElementById('uport-wrapper');\n  if (uportWrapper) document.body.removeChild(uportWrapper);\n};\n\n/**\n * A utility function for rendering a modal with particular content\n *\n * @param     {String}    content   html string defining the inside of the modal\n * @param     {Function}  [close]   the handler to fire when the modal's x button is pressed\n */\nvar makeModal = function makeModal(content) {\n  var closeModal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : close;\n\n  var wrapper = void 0;\n  // Create new wrapper if not present\n  if (!(wrapper = document.getElementById('uport-wrapper'))) {\n    wrapper = document.createElement('div');\n    wrapper.setAttribute('id', 'uport-wrapper');\n  }\n\n  wrapper.innerHTML = content;\n\n  document.body.appendChild(wrapper);\n  document.getElementById('uport__modal-x').addEventListener('click', closeModal);\n};\n\n/**\n *  A default QR pop over display, which injects the neccessary html\n *\n *  @param    {String}     data       data which is displayed in QR code\n *  @param    {Function}   cancel     a function called when the cancel button is clicked\n *  @param    {String}     modalText  message to be displayed above the QR in the modal\n */\nvar open = exports.open = function open(data, cancel, modalText) {\n  var closeModal = close; // closure over close for use in callbacks etc.\n  var content = (0, _templates.qrModal)(getImageDataURI(data), modalText);\n\n  var cancelClick = function cancelClick(event) {\n    document.getElementById('uport__qr-text').innerHTML = 'Cancelling';\n    if (cancel) cancel();\n    closeModal();\n  };\n\n  makeModal(content, cancelClick);\n};\n\n/**\n * Show a notification to the user that a push has been sent to their phone\n * @param   {Function}    fallback    The fallback handler if the user doesn't receive a push\n */\nvar notifyPushSent = exports.notifyPushSent = function notifyPushSent(fallback) {\n  makeModal(_templates.pushModal);\n  document.getElementById('uport__push-not-received').addEventListener('click', function () {\n    close();\n    fallback();\n  });\n};\n\n/**\n * Show a success screen to the user which automatically dismisses\n * after @param {Number} timeout milliseconds\n */\nvar success = exports.success = function success() {\n  var timeout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 500;\n\n  makeModal(_templates.successModal);\n  setTimeout(close, timeout);\n};\n\n/**\n * Show a spinner (the Consensys Hurricane)\n * @param {Function} cancel  Function to fire when the close button is pressed\n */\nvar spinner = exports.spinner = function spinner() {\n  var cancel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : close;\n\n  makeModal(_templates.spinnerModal, cancel);\n};\n\n/**\n * Present a dialog asking \n */\nvar askProvider = exports.askProvider = function askProvider(isTx) {\n  return new Promise(function (resolve, reject) {\n    var closeAndResolve = function closeAndResolve(useInjectedProvider) {\n      return function () {\n        var remember = document.getElementById('uport__provider-remember').checked;\n        close();\n        resolve({ remember: remember, useInjectedProvider: useInjectedProvider });\n      };\n    };\n\n    makeModal((0, _templates.providerModal)(isTx), closeAndResolve(false));\n\n    // Set up event listeners on dialog buttons\n    document.getElementById('uport__provider-yes').addEventListener('click', closeAndResolve(true));\n    document.getElementById('uport__provider-no').addEventListener('click', closeAndResolve(false));\n  });\n};\n\n/**\n * Show a failure modal that gives users the option to repeat the failed action\n * @param {Function}  resend  The function that should fire to allow the user to retry\n */\nvar failure = exports.failure = function failure(retry) {\n  makeModal(_templates.failureModal);\n\n  document.getElementById('uport__failure-retry').addEventListener('click', retry);\n};","map":{"mappings":[{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":91,"column":0},"generated":{"line":91,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":92,"column":0},"generated":{"line":92,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":93,"column":0},"generated":{"line":93,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":94,"column":0},"generated":{"line":94,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":95,"column":0},"generated":{"line":95,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":96,"column":0},"generated":{"line":96,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":97,"column":0},"generated":{"line":97,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":98,"column":0},"generated":{"line":98,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":99,"column":0},"generated":{"line":99,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":100,"column":0},"generated":{"line":100,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":101,"column":0},"generated":{"line":101,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":102,"column":0},"generated":{"line":102,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":103,"column":0},"generated":{"line":103,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":104,"column":0},"generated":{"line":104,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":105,"column":0},"generated":{"line":105,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":106,"column":0},"generated":{"line":106,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":107,"column":0},"generated":{"line":107,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":108,"column":0},"generated":{"line":108,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":109,"column":0},"generated":{"line":109,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":110,"column":0},"generated":{"line":110,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":111,"column":0},"generated":{"line":111,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":112,"column":0},"generated":{"line":112,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":113,"column":0},"generated":{"line":113,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":114,"column":0},"generated":{"line":114,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":115,"column":0},"generated":{"line":115,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":116,"column":0},"generated":{"line":116,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":117,"column":0},"generated":{"line":117,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":118,"column":0},"generated":{"line":118,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":119,"column":0},"generated":{"line":119,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":120,"column":0},"generated":{"line":120,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":121,"column":0},"generated":{"line":121,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":122,"column":0},"generated":{"line":122,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":123,"column":0},"generated":{"line":123,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":124,"column":0},"generated":{"line":124,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":125,"column":0},"generated":{"line":125,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":126,"column":0},"generated":{"line":126,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":127,"column":0},"generated":{"line":127,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":128,"column":0},"generated":{"line":128,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":129,"column":0},"generated":{"line":129,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":130,"column":0},"generated":{"line":130,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":131,"column":0},"generated":{"line":131,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":132,"column":0},"generated":{"line":132,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":133,"column":0},"generated":{"line":133,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":134,"column":0},"generated":{"line":134,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":135,"column":0},"generated":{"line":135,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":136,"column":0},"generated":{"line":136,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":137,"column":0},"generated":{"line":137,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":138,"column":0},"generated":{"line":138,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":139,"column":0},"generated":{"line":139,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":140,"column":0},"generated":{"line":140,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":141,"column":0},"generated":{"line":141,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":142,"column":0},"generated":{"line":142,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":143,"column":0},"generated":{"line":143,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":144,"column":0},"generated":{"line":144,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":145,"column":0},"generated":{"line":145,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":146,"column":0},"generated":{"line":146,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":147,"column":0},"generated":{"line":147,"column":0}},{"source":"node_modules/uport-transports/lib/transport/ui/index.js","original":{"line":148,"column":0},"generated":{"line":148,"column":0}}],"sources":{"node_modules/uport-transports/lib/transport/ui/index.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.failure = exports.askProvider = exports.spinner = exports.success = exports.notifyPushSent = exports.open = exports.close = exports.getImageDataURI = undefined;\n\nvar _qrImage = require('qr-image');\n\nvar _qrImage2 = _interopRequireDefault(_qrImage);\n\nvar _templates = require('./templates');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @module uport-transports/transport/ui\n * @description\n * A set of ui utility functions and default displays for bridging between\n * a web browser and a uport user's mobile app\n */\n\n/**\n *  Given a string of data it returns a image URI which is a QR code. An image\n *  URI can be displayed in a img html tag by setting the src attrbiute to the\n *  the image URI.\n *\n *  @param    {String}     data      data string, typically a uPort URI\n *  @return   {String}               image URI\n */\nvar getImageDataURI = exports.getImageDataURI = function getImageDataURI(data) {\n  var pngBuffer = _qrImage2.default.imageSync(data, { type: 'png' });\n  return 'data:image/png;charset=utf-8;base64, ' + pngBuffer.toString('base64');\n};\n\n/**\n *  Closes the default QR pop over\n */\nvar close = exports.close = function close() {\n  var uportWrapper = document.getElementById('uport-wrapper');\n  if (uportWrapper) document.body.removeChild(uportWrapper);\n};\n\n/**\n * A utility function for rendering a modal with particular content\n *\n * @param     {String}    content   html string defining the inside of the modal\n * @param     {Function}  [close]   the handler to fire when the modal's x button is pressed\n */\nvar makeModal = function makeModal(content) {\n  var closeModal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : close;\n\n  var wrapper = void 0;\n  // Create new wrapper if not present\n  if (!(wrapper = document.getElementById('uport-wrapper'))) {\n    wrapper = document.createElement('div');\n    wrapper.setAttribute('id', 'uport-wrapper');\n  }\n\n  wrapper.innerHTML = content;\n\n  document.body.appendChild(wrapper);\n  document.getElementById('uport__modal-x').addEventListener('click', closeModal);\n};\n\n/**\n *  A default QR pop over display, which injects the neccessary html\n *\n *  @param    {String}     data       data which is displayed in QR code\n *  @param    {Function}   cancel     a function called when the cancel button is clicked\n *  @param    {String}     modalText  message to be displayed above the QR in the modal\n */\nvar open = exports.open = function open(data, cancel, modalText) {\n  var closeModal = close; // closure over close for use in callbacks etc.\n  var content = (0, _templates.qrModal)(getImageDataURI(data), modalText);\n\n  var cancelClick = function cancelClick(event) {\n    document.getElementById('uport__qr-text').innerHTML = 'Cancelling';\n    if (cancel) cancel();\n    closeModal();\n  };\n\n  makeModal(content, cancelClick);\n};\n\n/**\n * Show a notification to the user that a push has been sent to their phone\n * @param   {Function}    fallback    The fallback handler if the user doesn't receive a push\n */\nvar notifyPushSent = exports.notifyPushSent = function notifyPushSent(fallback) {\n  makeModal(_templates.pushModal);\n  document.getElementById('uport__push-not-received').addEventListener('click', function () {\n    close();\n    fallback();\n  });\n};\n\n/**\n * Show a success screen to the user which automatically dismisses\n * after @param {Number} timeout milliseconds\n */\nvar success = exports.success = function success() {\n  var timeout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 500;\n\n  makeModal(_templates.successModal);\n  setTimeout(close, timeout);\n};\n\n/**\n * Show a spinner (the Consensys Hurricane)\n * @param {Function} cancel  Function to fire when the close button is pressed\n */\nvar spinner = exports.spinner = function spinner() {\n  var cancel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : close;\n\n  makeModal(_templates.spinnerModal, cancel);\n};\n\n/**\n * Present a dialog asking \n */\nvar askProvider = exports.askProvider = function askProvider(isTx) {\n  return new Promise(function (resolve, reject) {\n    var closeAndResolve = function closeAndResolve(useInjectedProvider) {\n      return function () {\n        var remember = document.getElementById('uport__provider-remember').checked;\n        close();\n        resolve({ remember: remember, useInjectedProvider: useInjectedProvider });\n      };\n    };\n\n    makeModal((0, _templates.providerModal)(isTx), closeAndResolve(false));\n\n    // Set up event listeners on dialog buttons\n    document.getElementById('uport__provider-yes').addEventListener('click', closeAndResolve(true));\n    document.getElementById('uport__provider-no').addEventListener('click', closeAndResolve(false));\n  });\n};\n\n/**\n * Show a failure modal that gives users the option to repeat the failed action\n * @param {Function}  resend  The function that should fire to allow the user to retry\n */\nvar failure = exports.failure = function failure(retry) {\n  makeModal(_templates.failureModal);\n\n  document.getElementById('uport__failure-retry').addEventListener('click', retry);\n};"},"lineCount":148}},"hash":"a4ef89491561bdc36b8faa58782d59d8","cacheData":{"env":{}}}